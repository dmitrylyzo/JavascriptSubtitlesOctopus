name: Publish to NPM

on:
  push:
    branches:
      - ci
    tags:
      - v*

jobs:
  release:
    name: Publish to NPM
    needs: [build]
    runs-on: ubuntu-latest

    steps:
    - name: Download artifacts
      uses: actions/download-artifact@v4.1.8
      with:
        name: js

    - name: List artifacts content
      run: |
        ls -l

    - name: Setup node environment for NPM
      uses: actions/setup-node@v4.0.2
      with:
        node-version: 20
        registry-url: 'https://registry.npmjs.org'
        check-latest: true

#    - name: Publish to NPM
#      run: SKIP_PREPARE=1 npm publish --access public
#      env:
#        NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}
